!function(){"use strict";function e(e,t){return function(n){function r(){C=arguments[0]}function o(){return C}function i(){D=arguments[0]}function u(){return D}function s(){V=arguments[0]}function a(){return V}function d(){z=arguments[0]}function c(){return z}function f(){G=arguments[0]}function l(){return G}function g(){L=arguments[0]}function m(){return L}function p(){H=arguments[0]}function b(){return H}function B(){M=arguments[0]}function T(){return M}function k(e,t,n){return A("products",{latitude:e,longitude:t},n)}function E(e,t){return A("products/"+e,null,t)}function _(e,t,n,r,o){return A("estimates/price",{start_latitude:e,start_longitude:t,end_latitude:n,end_longitude:r},o)}function v(e,t,n,r,o){return A("estimates/time",{start_latitude:e,start_longitude:t,customer_uuid:n,product_id:r},o)}function h(e,t,n,r,o){return A("promotions",{start_latitude:e,start_longitude:t,end_latitude:n,end_longitude:r},o)}function U(e,t,n){return A("history",{offset:e,limit:t},n,{version:"/v1.2/",isBearerEndpoint:!0})}function w(e){return A("me",null,e,{isBearerEndpoint:!0})}function x(e,t,n,r,o,i,u){return A("requests",null,u,{isBearerEndpoint:!0,method:"POST",data:{product_id:e,start_latitude:t,start_longitude:n,end_latitude:r,end_longitude:o,surge_confirmation_id:i}})}function q(e,t){return A("requests/"+e,null,t,{isBearerEndpoint:!0})}function S(e,t,n,r,o,i){return A("requests/estimate",null,i,{isBearerEndpoint:!0,method:"POST",data:{product_id:e,start_latitude:t,start_longitude:n,end_latitude:r,end_longitude:o}})}function O(e,t){return A("requests/"+e,null,t,{isBearerEndpoint:!0,method:"DELETE"})}function P(e,t){return A("requests/"+e+"/map",null,t,{isBearerEndpoint:!0})}function R(e,t){return A("requests/"+e+"/receipt",null,t,{isBearerEndpoint:!0})}function y(e,t,n){if(!e)throw new Error("An endpoint must be specified.");if(n.isBearerEndpoint&&!t.bearerToken&&!z)throw new Error("Bearer token must be specified for "+e+" endpoint.");if(!(t.serverToken||V||t.bearerToken||z))throw new Error("Options serverToken and bearerToken are not defined.");if((t.useBearerToken||G)&&!t.bearerToken&&!z)throw new Error("Option useBearerToken specified but bearerToken not defined.");if((t.sandbox||H)&&!t.sandboxBaseUrl&&!M)throw new Error("Option sandbox is true and sandboxBaseUrl not defined.");if(!(t.sandbox||H||t.baseUrl||C))throw new Error("Option baseUrl not defined.");if(!t.version&&!n.version&&!D)throw new Error("Option version not defined.")}function I(e,t,n,r){var o={};return o.headers=$(n,r),o.url=j(e,n,r),o.method=r.method||"GET",o.params=t,o.data=r.data,o}function $(e,t){var n={};return n.Authorization=t.isBearerEndpoint||e.useBearerToken||G?"Bearer "+(e.bearerToken||z):"Token "+(e.serverToken||V),n}function j(e,t,n){var r;return r=t.sandbox||H?t.sandboxBaseUrl||M:t.baseUrl||C,r+=t.version||n.version||D,r+=e}function A(n,r,o,i){function u(e){a.resolve(e)}function s(e){a.reject(e)}var a,d;return o=o||{},i=i||{},y(n,o,i),d=I(n,r,o,i),a=e.defer(),t(d).success(u).error(s),a.promise}n=n||{};var C=n.baseUrl||"https://api.uber.com",D=n.version||"/v1/",V=n.serverToken,z=n.bearerToken,G=n.useBearerToken||!1,H=n.sandbox||!1,L=n.clientId,M=n.sandboxBaseUrl||"https://sandbox-api.uber.com";return{setBaseUrl:r,getBaseUrl:o,setVersion:i,getVersion:u,setServerToken:s,getServerToken:a,setBearerToken:d,getBearerToken:c,setUseBearerToken:f,getUseBearerToken:l,setClientId:g,getClientId:m,setSandbox:p,getSandbox:b,setSandboxBaseUrl:B,getSandboxBaseUrl:T,getProducts:k,getProduct:E,getPriceEstimates:_,getTimeEstimates:v,getPromotions:h,getHistory:U,getUserProfile:w,makeRequest:x,getRequestDetails:q,getRequestEstimate:S,cancelRequest:O,getRequestMap:P,getRequestReceipt:R}}}angular.module("mbergt.uber",[]).factory("mbUber",e),e.$inject=["$q","$http"]}();